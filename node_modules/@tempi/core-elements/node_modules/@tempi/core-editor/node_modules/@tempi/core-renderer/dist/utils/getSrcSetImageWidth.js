'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var root = require('../constants/root.js');
var isAbsoluteWidth = require('./isAbsoluteWidth.js');

const generateArraySrcSet = (min, max) => {
  const arr = [];
  let i = 1;
  while (min * i < max) {
    if (i > 100)
      return arr;
    arr.push(min * i);
    i++;
  }
  arr.push(max);
  return arr;
};
const getSrcSetImageWidth = (maxWidthImage, breakpointWidth) => {
  const breakpointWidthS = breakpointWidth.sWidth;
  let sWidth;
  if (isAbsoluteWidth.isAbsoluteWidth(breakpointWidthS)) {
    const minSrcSetWidth = breakpointWidthS.value;
    const maxSrcSetWidth = Math.min(maxWidthImage, minSrcSetWidth * root.MAX_DPR);
    sWidth = generateArraySrcSet(minSrcSetWidth, maxSrcSetWidth);
  } else {
    const minSrcSetWidth = Math.floor(
      breakpointWidthS.value * root.MINESTONE_M_WIDTH / 100
    );
    const maxSrcSetWidth = Math.min(maxWidthImage, minSrcSetWidth * root.MAX_DPR);
    sWidth = generateArraySrcSet(minSrcSetWidth, maxSrcSetWidth);
  }
  let mWidth;
  const breakpointWidthM = breakpointWidth.mWidth;
  if (isAbsoluteWidth.isAbsoluteWidth(breakpointWidthM)) {
    const minSrcSetWidth = breakpointWidthM.value;
    const maxSrcSetWidth = Math.min(maxWidthImage, minSrcSetWidth * root.MAX_DPR);
    mWidth = generateArraySrcSet(minSrcSetWidth, maxSrcSetWidth);
  } else {
    const minSrcSetWidth = Math.floor(
      breakpointWidthM.value * root.MINESTONE_M_WIDTH / 100
    );
    const maxSrcSetWidth = maxWidthImage;
    mWidth = generateArraySrcSet(minSrcSetWidth, maxSrcSetWidth);
  }
  return {
    sWidth,
    mWidth
  };
};

exports.getSrcSetImageWidth = getSrcSetImageWidth;
