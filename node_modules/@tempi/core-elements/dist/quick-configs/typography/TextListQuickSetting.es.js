import { jsx } from 'react/jsx-runtime';
import { UnorderedListOutlined, OrderedListOutlined } from '@ant-design/icons';
import { QuickSettingButton } from '@tempi/core-editor';
import { NODE_TYPES } from '../../configs/TipTapEditor/constants.es.js';

const listTypes = [NODE_TYPES.orderedList, NODE_TYPES.bulletList];
const TextListQuickSetting = ({
  editor
}) => {
  const renderIcon = () => {
    const iconMap = [OrderedListOutlined, UnorderedListOutlined];
    for (let i = 0; i < listTypes.length; i++) {
      const type = listTypes[i];
      const Comp = iconMap[i];
      if (editor == null ? void 0 : editor.isActive(type)) {
        return /* @__PURE__ */ jsx(Comp, {});
      }
    }
    return /* @__PURE__ */ jsx(UnorderedListOutlined, {});
  };
  const setList = (type) => {
    var _a, _b;
    (_b = (_a = editor == null ? void 0 : editor.commands) == null ? void 0 : _a.executeCmd) == null ? void 0 : _b.call(
      _a,
      ({ chain }) => chain().toggleList(type, NODE_TYPES.listItem, true).updateAttributes(
        NODE_TYPES.listItem,
        editor.getAttributes(
          editor.isActive(NODE_TYPES.heading) ? NODE_TYPES.heading : NODE_TYPES.paragraph
        )
      ).run()
    );
  };
  const onClick = () => {
    const currentPos = listTypes.findIndex((val) => editor == null ? void 0 : editor.isActive(val));
    if (currentPos !== listTypes.length - 1) {
      setList(listTypes[(currentPos + 1) % listTypes.length]);
    } else {
      setList(listTypes[listTypes.length - 1]);
    }
  };
  return /* @__PURE__ */ jsx(QuickSettingButton, {
    onClick,
    children: renderIcon()
  });
};

export { TextListQuickSetting };
