'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var coreEditor = require('@tempi/core-editor');
var coreRenderer = require('@tempi/core-renderer');
var React = require('react');
var propKey = require('../../../constants/propKey.js');

const usePopup = () => {
  const { actions } = coreEditor.useEditor();
  const { node, isActive } = coreEditor.useNode((node2) => ({
    node: node2,
    isActive: node2.events.selected
  }));
  const [isMainPopup] = coreEditor.useProp(propKey.PROP_KEY.IsMainPopup);
  const { isEditingPopup, track, smartPopupId } = coreEditor.useBuilder();
  const [show, setShow] = React.useState(false);
  const [quickSettingVisible, setQuickSettingVisible] = React.useState(false);
  React.useEffect(() => {
    if (isActive || isEditingPopup && !smartPopupId || isEditingPopup && smartPopupId && isMainPopup) {
      actions.setCustom(coreRenderer.ROOT, (custom) => custom.isEditingPopup = true);
      setShow(true);
    }
  }, [isActive, node.id, isEditingPopup, smartPopupId, isMainPopup]);
  return {
    show,
    setShow,
    quickSettingVisible,
    setQuickSettingVisible,
    track
  };
};

exports.usePopup = usePopup;
