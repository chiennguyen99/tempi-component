import { useEffect } from 'react';
import { useProp } from '@tempi/core-editor';
import { NumberCounterLayout } from '../type.es.js';
import { DEFAULT_BAR_STYLE, DEFAULT_CIRCLE_STYLE, DEFAULT_NUMBER_STYLE } from '../constants.es.js';
import { PROP_KEY } from '../../../constants/propKey.es.js';

const useChangeLayout = () => {
  const [layout] = useProp(PROP_KEY.Layout);
  const [barStyle, setBarStyle] = useProp(PROP_KEY.BarStyle);
  const [circleStyle, setCircleStyle] = useProp(PROP_KEY.CircleStyle);
  const [, setTextStyle] = useProp(PROP_KEY.TextStyle);
  const [, setNumberStyle] = useProp(PROP_KEY.NumberStyle);
  useEffect(() => {
    if (layout === NumberCounterLayout.bar) {
      setCircleStyle(void 0);
      if (!barStyle) {
        setBarStyle(DEFAULT_BAR_STYLE.barStyle);
        setTextStyle(DEFAULT_BAR_STYLE.textStyle);
        setNumberStyle(DEFAULT_BAR_STYLE.numberStyle);
      }
    } else if (layout === NumberCounterLayout.circle) {
      setBarStyle(void 0);
      if (!circleStyle) {
        setCircleStyle(DEFAULT_CIRCLE_STYLE.circleStyle);
        setTextStyle(DEFAULT_CIRCLE_STYLE.textStyle);
        setNumberStyle(DEFAULT_CIRCLE_STYLE.numberStyle);
      }
    } else {
      setCircleStyle(void 0);
      setBarStyle(void 0);
      setTextStyle(DEFAULT_NUMBER_STYLE.textStyle);
      setNumberStyle(DEFAULT_NUMBER_STYLE.numberStyle);
    }
  }, [layout]);
};

export { useChangeLayout };
