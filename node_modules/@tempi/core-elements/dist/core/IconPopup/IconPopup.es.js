import { jsxs, jsx } from 'react/jsx-runtime';
import { t } from '../../i18n.es.js';
import React__default, { useState, useMemo } from 'react';
import { LIST_ICONS, Icon } from '@tempi/icons';
import { Typography, Empty, Input } from 'antd';
import styled from '@emotion/styled';
import { getPropsIcon } from '../../utils/getPropsIcon.es.js';

var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
const iconTypes = ["Fill", "Outline", "Color"];
const IconPopup = ({
  onClose,
  iconName,
  onSelectIcon
}) => {
  const [activeTab, setActiveTab] = useState(0);
  const [keyword, setKeyWord] = useState("");
  const onSearch = (event) => {
    setKeyWord(event.target.value);
  };
  const filterWithKeyword = (key) => {
    if (keyword)
      return new RegExp(keyword, "i").test(key);
    return true;
  };
  const filterDevIcon = (key) => !new RegExp("Dev", "i").test(key);
  const OutlinedIcons = useMemo(
    () => LIST_ICONS.filter(
      (key) => !key.startsWith("Antd") && key.endsWith("Outlined") && filterWithKeyword(key)
    ),
    [keyword]
  );
  const FilledIcons = useMemo(
    () => LIST_ICONS.filter(
      (key) => !key.startsWith("Antd") && key.endsWith("Filled") && filterWithKeyword(key) && filterDevIcon(key)
    ),
    [keyword]
  );
  const ColoredIcons = useMemo(
    () => LIST_ICONS.filter(
      (key) => !key.startsWith("Antd") && key.endsWith("Colored") && filterWithKeyword(key)
    ),
    [keyword]
  );
  const IconTabs = [FilledIcons, OutlinedIcons, ColoredIcons];
  const handleClickIcon = (e) => {
    if (iconName === e) {
      onSelectIcon(null);
      return;
    }
    onSelectIcon(e);
    onClose();
  };
  return /* @__PURE__ */ jsxs(Wrapper, {
    children: [
      /* @__PURE__ */ jsx(StyledClose, {
        name: "CloseOutlined",
        style: { fontSize: 20 },
        onClick: onClose
      }),
      /* @__PURE__ */ jsx(TabHeader, {
        children: iconTypes.map((e, index) => /* @__PURE__ */ jsx(React__default.Fragment, {
          children: /* @__PURE__ */ jsx(TabItem, {
            className: activeTab === index ? "active" : "",
            onClick: () => setActiveTab(index),
            children: /* @__PURE__ */ jsx(Typography.Paragraph, {
              style: { marginBottom: 0, color: "inherit" },
              children: e
            })
          })
        }, index))
      }),
      /* @__PURE__ */ jsx(SearchInput, {
        value: keyword,
        onChange: onSearch,
        placeholder: t("T\xECm ki\u1EBFm bi\u1EC3u t\u01B0\u1EE3ng \u1EDF \u0111\xE2y")
      }),
      /* @__PURE__ */ jsx("div", {
        style: { height: 350 },
        children: /* @__PURE__ */ jsx(IconWrapper, {
          children: IconTabs[activeTab].length ? IconTabs[activeTab].map((e, index) => /* @__PURE__ */ jsx(StyledIcon, {
            className: iconName === e ? "active" : "",
            onClick: () => handleClickIcon(e),
            children: React__default.createElement(Icon, __spreadValues({
              name: e
            }, getPropsIcon({
              size: 24
            })))
          }, index)) : /* @__PURE__ */ jsx(Empty, {
            style: { margin: "auto" }
          })
        })
      })
    ]
  });
};
const Wrapper = styled.div`
  position: relative;
  padding: 1rem;
`;
const StyledClose = styled(Icon)`
  position: absolute;
  top: 1.3rem;
  right: 1rem;
  cursor: pointer;
`;
const TabHeader = styled.div`
  display: flex;
  margin-left: 0.5rem;
  margin-bottom: 1rem;
`;
const TabItem = styled.div(
  ({ theme }) => `
  padding: 4px 12px;
  border-radius: 999px;
  margin-right: 1rem;
  cursor: pointer;
  &.active {
    background: ${theme.colorPrimary} !important;
    color: var(--text-color-inverse);
  }
`
);
const SearchInput = styled(Input.Search)`
  padding-left: 0.5rem;
  padding-bottom: 1rem;
`;
const IconWrapper = styled.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  overflow: auto;
`;
const StyledIcon = styled.div(
  ({ theme }) => `
  width: 24px;
  height: 24px;
  padding: 0.5rem;
  border-radius: 0.5rem;
  border: 1px solid transparent;
  box-sizing: content-box;
  cursor: pointer;

  &:hover {
    border: 1px solid grey;
  }
  &.active {
    border: 1px solid ${theme.colorPrimary} !important;
  }
  > svg {
    margin: auto;
  }
`
);

export { IconPopup };
