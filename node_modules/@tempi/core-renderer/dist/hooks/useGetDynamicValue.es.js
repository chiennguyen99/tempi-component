import get from 'lodash.get';
import { usePageData } from '../contexts/PageDataContext.es.js';

const useGetDynamicValue = () => {
  const { getValueByPath } = usePageData();
  const getValue = (valueConfig, extraDataSrc) => {
    const { valueType, contextPath, staticValue } = valueConfig || {};
    if (valueType === "STATIC" && staticValue)
      return staticValue;
    if (valueType === "CONTEXT_PATH" && contextPath) {
      return get(extraDataSrc, contextPath) || getValueByPath(contextPath);
    }
  };
  return { getValue };
};

export { useGetDynamicValue };
