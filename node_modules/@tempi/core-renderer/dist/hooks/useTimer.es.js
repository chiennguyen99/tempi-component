import { useState, useEffect } from 'react';
import { calculateTimeDelta } from '../utils/date-time.es.js';

const useTimer = (endAt) => {
  const [time, setTime] = useState(() => {
    return endAt ? calculateTimeDelta(new Date(), endAt) : null;
  });
  useEffect(() => {
    const timer = setInterval(
      () => setTime(calculateTimeDelta(new Date(), endAt)),
      1e3
    );
    return () => {
      clearInterval(timer);
    };
  }, [endAt]);
  return time;
};

export { useTimer };
